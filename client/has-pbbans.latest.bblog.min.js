/*
    @name BF3/BF4/BFH Has PBBans
    @author GreatApo & DarkThanos
    @version 1.6.0
    @release_date 20/06/2016
    @url http://www.alites.com

    Licensed under CC BY-NC-ND 3.0
    Link: http://creativecommons.org/licenses/by-nc-nd/3.0/deed.en
*/

BBLog.handle("add.plugin",{id:"has-pbbans-plugin",name:"Has PBBans",version:"1.6.0",build:"20160620",init:function(a){"bf4"===BBLog.cache("mode")?(a.events.onPageLoad(a,{page:"^/bf4/("+BBLog.cache("language")+"/)*(servers|serverbrowserwarsaw)/(playnow/|favourites/|history/)*(pc/|ps3/|ps4/|xbox360/|xboxone/)*[^/]*$",callback:a.hasPBBans.bf4.serverlist.init}),a.events.onPageLoad(a,{page:"^/bf4/("+BBLog.cache("language")+"/)*servers/show/(pc/|ps3/|ps4/|xbox360/|xboxone/)+[0-9a-zA-Z-]+/[^/]+/$",callback:a.hasPBBans.bf4.serverinfo.init}),
a.loadCSS.bf4(a)):"bfh"===BBLog.cache("mode")?(a.events.onPageLoad(a,{page:"^/bfh/("+BBLog.cache("language")+"/)*(servers|serverbrowserwarsaw)/(playnow/|favourites/|history/)*(pc/|ps3/|ps4/|xbox360/|xboxone/)*[^/]*$",callback:a.hasPBBans.bfh.serverlist.init}),a.events.onPageLoad(a,{page:"^/bfh/("+BBLog.cache("language")+"/)*servers/show/(pc/|ps3/|ps4/|xbox360/|xboxone/)+[0-9a-zA-Z-]+/[^/]+/$",callback:a.hasPBBans.bfh.serverinfo.init}),a.loadCSS.bfh(a)):"bf3"===BBLog.cache("mode")&&(a.events.onPageLoad(a,
{page:"^/bf3/("+BBLog.cache("language")+"/)*servers/(playnow/|favourites/|history/)*(pc/|ps3/|ps4/|xbox360/|xboxone/)*[^/]*$",callback:a.hasPBBans.bf3.serverlist.init}),a.events.onPageLoad(a,{page:"^/bf3/("+BBLog.cache("language")+"/)*servers/show/(pc/|ps3/|xbox360/)+[0-9a-zA-Z-]+/[^/]+/$",callback:a.hasPBBans.bf3.serverinfo.init}),a.loadCSS.bf3(a))},domchange:function(a){a.eventsFire.onPageLoad(a)},events:{onPageLoad:function(a,b){b.page&&b.callback&&a.eventsData.onPageLoad.push(b)}},eventsFire:{onPageLoad:function(a){var b;
for(b=0;b<a.eventsData.onPageLoad.length;b++)document.location.pathname.match(new RegExp(a.eventsData.onPageLoad[b].page,"i"))&&a.eventsData.onPageLoad[b].callback(a)}},eventsData:{onPageLoad:[]},loadCSS:{css:{any:"",bf4:'.icon-pbbans[class*=" icon-"]{width:20px;margin-right:-2px;margin-left:-2px;height:13px;vertical-align:middle;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAQAAAADWYbVAAAAAmJLR0QAViiF1/MAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQfeCQsVJyjLbEmLAAABeUlEQVQoz2WPPWsUURiFn/fuzOzsRzZRWQmCIgQU09jEIoWIiK1gYRFUROzs/C8WNmptaSGWmy5NsBBUxI9KjCS6uNn5uDN37n0t4gQxpzzn4YGD/hefvTntX6k2/t+22owKPG0SujBYfCwOlGkQW/ciFiQhXI4ercXDA0x4ePfCA6WMpQaRetVrsZzeXrhDr5ToyQukNeqJQKAKoBg5+YESx0hwlC4qVxoU/esMlLr7vj7vKPjpjEg32FF3JGkS5VhmweVImqRx6b9uXst01aE6XF+q6ouyEa5m/TnyRS372+uXIHyWFadGQDEYwvTdCNvp0FMKjb59qiJeg459IljywtSVSZJjaXx8+cdW1Vekmu+9PDxSj8N2c6Ymv+Lmzbn05tItTFacGrR7dPgYxwyFSVzGA5ihFP7++PnewW5asMHym1/Zx7Wd6zs3dp/mvsAPNu4dMdZY5tA/O5HaWtNpyKne5sMjYM4+UyJpFiEHAmbCs9n3dv8DdJvKVwnBs2MAAAAASUVORK5CYII=) repeat scroll 0% 0% transparent;}.icon-ggcstream[class*=" icon-"]{width:20px;margin-right:-2px;margin-left:-2px;height:13px;vertical-align:middle;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAQAAAADWYbVAAAAAmJLR0QAViiF1/MAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQfeCQsVMidsZrIOAAAADWlUWHRDb21tZW50AAAAAAAqgNajCQAAAcpJREFUKM8tkD1rU2EYhu/nfc9JkzYcc9pooCmig7gYP/ADLBaldBAcnPQPqODcxR+g9CcU1EUcXMSl4CK4KG4qfqAOOmipiU3SnOScnI+8X49DM95wcXFx4/d68s0yMzNre+7vo38221/s9jqr21sxO2Zm9ubXS00DBgCJG7VVEgITAABEtYVLJWgwAK/adFCZLeDBR6UaOihjMoCJ/lSWRWhZZZYJcJzo7Lj28xkWyWUeJdy5B3BZzSZn9CvNvTaX4kbS8DT0+647tIbbseA3BXGUvd252b/ltOhKI+GekcIu4OUwn3Q4eUCnmVxuIH+pWXnXv+LAu+MPnpXP94O9BHKsbHqQBMEuEPm2aNGyJAeaK3ywMFNwCBMaKka6biqwAigXH73PcUuVpTASKKfTCyL0zhc7M5vD1wMecMT9xUE8t5G86A0jGYuYthtT4wDq6JfmysONn8euSghrguTAtZd32hcvzB9hkIiu3/8RkAM9ZoNhnPdFVD/rb4kVG473ksLKoF7TeIe1XA070oG87ne1pAIdEDT8r6WTJpwsaDgYjNNK20CVJocBQJ5aGtUmiwoaKfRT5ccnctLQKJCl9CRqxE1DihT9B/uB/nxN9/xiAAAAAElFTkSuQmCC) repeat scroll 0% 0% transparent;}.icon-anticheatinc[class*=" icon-"]{width:20px;margin-right:-2px;margin-left:-2px;height:13px;vertical-align:middle;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAQAAAADWYbVAAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQfeCQsVNwMtEqKaAAAADWlUWHRDb21tZW50AAAAAAAqgNajCQAAAVdJREFUKM9Vzj1LHFEUh/Hn3B3N6koaRWFLtTHGDeIIdtHW0sLWF/Bb2IsEUgS0zhexsdBS1ErBlwQCwRXEde7szsydcyxcd/HpDvz+cADQS8st1xMAKBb0SB/1NKwCaGa5dgBo1qw0M9P25QBk09q0wsyCPhcxmJmZAZAvWLdsBvSX9dLffeig8pVulTngO4DuArBCLwfSg64BTAKUh9a0R3wfRlA2BHJKN0QDZARg8Ek3ELIPMPnm4A+F+2LzkAICtM8oQwEFggDRzUQy7sBJJFj9djTpwvRAAi12fPeONPYi2JTgEOfiJBAJfyf9mmApO+/DqLOUIVQeBB0XPi0VD9RhcC8guDtIkLcf0/k2wud9s+SnUMacZ3UhXQehevYGBYheZjOg+h/1QJitbfplqZo4k07lRx+61phXr/l1uPKaamt08bi2Fe7bWfg3vB1fgA9ekwCv/9K82CYzBU4AAAAASUVORK5CYII=) repeat scroll 0% 0% transparent;}#serverbrowser-show .settings li.highlight{color:white!important;}',
bfh:'.icon-pbbans[class*=" icon-"]{width:20px;margin-right:-2px;margin-left:-2px;height:13px;vertical-align:middle;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAQAAAADWYbVAAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQfeCQsWEw05BNBiAAABd0lEQVQoz2WPv2sUURSFv/vmvTc/3mZH1l2xUIsEFGIRBC1SRPEvEAsLUVG08R+xE2zE0lYsLSSVbMoUqSxMoYWVCQoadzeb2ZnMuxa6QeM93T0f53BA/5WZXDpr3qJJ+/fXb9iChPnVzCD8fK4NCL2olc8PGUuNWbPPLjed35jy4t72IyF3WoOKX060OF3dGd8lz8U+fo3ME+WkwZBGEKJ83eaAhq7iyBubL1nkD6sYcj31wV9wFPSbKJqaapSOpPI2kFFGt49UvnJ5u7jxbiLLDtHJ6t7Mr+htc71TLCCLmtHd2rwC8kmXnEYBIRIx3y92qdqEXCjUnvmYWtaBgfFKRpjGOjW1/5E1vd3d1dlUkXQ8eHM0xA3Mlj3nCdfc2J6vbu7dwnSmO2Hu26PFOEoEhs1BE6BEKNong4ffjoGWjBPYSf/qKKPf3th/QJKEV/d5egz0ZCxA8XmodVbFxBJI34fOf9WBLj0OxZYQAEMc8rL8Mvd/AbeliI+/Vj/hAAAAAElFTkSuQmCC) repeat scroll 0% 0% transparent;opacity:0.7;}.icon-ggcstream[class*=" icon-"]{width:20px;margin-right:-2px;margin-left:-2px;height:13px;vertical-align:middle;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAQAAAADWYbVAAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQfeCQsWEwqnYEXBAAAADWlUWHRDb21tZW50AAAAAAAqgNajCQAAAcVJREFUKM8tzb1rFFEYxeHz3vvO3TubmXFnP7Ihq4lioU2CYkwREEUiCBZ2ljamsLYRxDL4JwgmvU2wMJBGsDGENCqKaIoIIshKQtZs1v2cmTuvxVo+8OMczD4KviqBQJCqhem1uvPHEmpN3TyzGQoJBKLzjeS8AoPBpNvJnVElHwt65PaG9xNfj91tKJi+HoLhwe/GCibjPkAkPwdLeazF9LUIQBKk/gX2bAEquI6TQKYeA7BeMbjMb1iqTZiwHtTZg/d+Mj9cxkqk6J0lOi5uN+6NHqg0P3SZg3qJ5O8BwD74kxcXVuUSkRow3HdTdA/TGwp0EHzInNsAAIBDuK5xEzVRAl0RSp2dkyVHCjJhPUietcZhCRwz2ROvyj5cDlj7MfsczRnrFGtg2Bsvqhi1q/bX6HnpbVnKEkt1utzpPQtf1dqxjlREM/X/12WYc/ON7RdP9vdvO+SOo/DU1tZ6c3fxz1mCqPju070OKdCKMEod/yg/PrqSbubXdBy0wqHWnWo7xQ6W/aT02+UgnvxmTpvIiwQe0i/JPMeFigcFRtAbNBnGFGYAgKuv7S1ZIAgijH4ku4VZRQCBgKy9E1w0i44A4B9ftK87RJhYowAAAABJRU5ErkJggg==) repeat scroll 0% 0% transparent;opacity:0.7;}.icon-anticheatinc[class*=" icon-"]{width:20px;margin-right:-2px;margin-left:-2px;height:13px;vertical-align:middle;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAQAAAADWYbVAAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQfeCQsWEwU331hQAAAADWlUWHRDb21tZW50AAAAAAAqgNajCQAAAVpJREFUKM9V0D1LW2EchvHr/+TJ23lOXQwWMqYu9SVFzOBWXTt2cPUF/BbuIgUHQWe/iIuDXVqkdWqX1kEoviCmRJOTc57bodHQa7vhN90A2DkZmZ0CgF+0Y7uxz6UPADYgsz4AjUCBkD3OlaEybdcMEbnd+w4ghAAoL46GKm/B9p8XsqMxdFDMMaqYB94DuG0AVnjJgV5gbAMtgNKhXdsNvTH0UGoLMopYpw1KAYZ3toYx+A+m7yJcMIwztvCXBBCP1M8o/LBLGSEKfOt1NhXByQtrNiZ7I5gcKKfLVgDEPd51ggl7IyJysZPmeFFruY/CHm630mdYW6oiiivhpsRgqXxFE7Idj4i/IB2d6JOFOqK7a0r3RKnDt2pTJKsg+mf/oAD/arYK9P8QA+Bne+thWTWzKPWLT2PoJhohhlj56X+EmMSJyS8nvQ3/uz7wlw+bX79DyENMc3gCcIOXaJ//CxgAAAAASUVORK5CYII=) repeat scroll 0% 0% transparent;opacity:0.7;}#serverbrowser-show .settings li.highlight{color:white!important;}',
bf3:".selected-server-setting-pbbans{width:20px;margin-right:-2px;margin-left:-2px;height:13px;vertical-align:middle;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAQAAAADWYbVAAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQfeCQsWEw05BNBiAAABd0lEQVQoz2WPv2sUURSFv/vmvTc/3mZH1l2xUIsEFGIRBC1SRPEvEAsLUVG08R+xE2zE0lYsLSSVbMoUqSxMoYWVCQoadzeb2ZnMuxa6QeM93T0f53BA/5WZXDpr3qJJ+/fXb9iChPnVzCD8fK4NCL2olc8PGUuNWbPPLjed35jy4t72IyF3WoOKX060OF3dGd8lz8U+fo3ME+WkwZBGEKJ83eaAhq7iyBubL1nkD6sYcj31wV9wFPSbKJqaapSOpPI2kFFGt49UvnJ5u7jxbiLLDtHJ6t7Mr+htc71TLCCLmtHd2rwC8kmXnEYBIRIx3y92qdqEXCjUnvmYWtaBgfFKRpjGOjW1/5E1vd3d1dlUkXQ8eHM0xA3Mlj3nCdfc2J6vbu7dwnSmO2Hu26PFOEoEhs1BE6BEKNong4ffjoGWjBPYSf/qKKPf3th/QJKEV/d5egz0ZCxA8XmodVbFxBJI34fOf9WBLj0OxZYQAEMc8rL8Mvd/AbeliI+/Vj/hAAAAAElFTkSuQmCC) no-repeat scroll 0% 0% transparent!important;}.selected-server-setting-ggcstream{width:20px;margin-right:-2px;margin-left:-2px;height:13px;vertical-align:middle;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAQAAAADWYbVAAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQfeCQsWEwqnYEXBAAAADWlUWHRDb21tZW50AAAAAAAqgNajCQAAAcVJREFUKM8tzb1rFFEYxeHz3vvO3TubmXFnP7Ihq4lioU2CYkwREEUiCBZ2ljamsLYRxDL4JwgmvU2wMJBGsDGENCqKaIoIIshKQtZs1v2cmTuvxVo+8OMczD4KviqBQJCqhem1uvPHEmpN3TyzGQoJBKLzjeS8AoPBpNvJnVElHwt65PaG9xNfj91tKJi+HoLhwe/GCibjPkAkPwdLeazF9LUIQBKk/gX2bAEquI6TQKYeA7BeMbjMb1iqTZiwHtTZg/d+Mj9cxkqk6J0lOi5uN+6NHqg0P3SZg3qJ5O8BwD74kxcXVuUSkRow3HdTdA/TGwp0EHzInNsAAIBDuK5xEzVRAl0RSp2dkyVHCjJhPUietcZhCRwz2ROvyj5cDlj7MfsczRnrFGtg2Bsvqhi1q/bX6HnpbVnKEkt1utzpPQtf1dqxjlREM/X/12WYc/ON7RdP9vdvO+SOo/DU1tZ6c3fxz1mCqPju070OKdCKMEod/yg/PrqSbubXdBy0wqHWnWo7xQ6W/aT02+UgnvxmTpvIiwQe0i/JPMeFigcFRtAbNBnGFGYAgKuv7S1ZIAgijH4ku4VZRQCBgKy9E1w0i44A4B9ftK87RJhYowAAAABJRU5ErkJggg==) no-repeat scroll 0% 0% transparent!important;}.selected-server-setting-anticheatinc{width:20px;margin-right:-2px;margin-left:-2px;height:13px;vertical-align:middle;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAQAAAADWYbVAAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQfeCQsWEwU331hQAAAADWlUWHRDb21tZW50AAAAAAAqgNajCQAAAVpJREFUKM9V0D1LW2EchvHr/+TJ23lOXQwWMqYu9SVFzOBWXTt2cPUF/BbuIgUHQWe/iIuDXVqkdWqX1kEoviCmRJOTc57bodHQa7vhN90A2DkZmZ0CgF+0Y7uxz6UPADYgsz4AjUCBkD3OlaEybdcMEbnd+w4ghAAoL46GKm/B9p8XsqMxdFDMMaqYB94DuG0AVnjJgV5gbAMtgNKhXdsNvTH0UGoLMopYpw1KAYZ3toYx+A+m7yJcMIwztvCXBBCP1M8o/LBLGSEKfOt1NhXByQtrNiZ7I5gcKKfLVgDEPd51ggl7IyJysZPmeFFruY/CHm630mdYW6oiiivhpsRgqXxFE7Idj4i/IB2d6JOFOqK7a0r3RKnDt2pTJKsg+mf/oAD/arYK9P8QA+Bne+thWTWzKPWLT2PoJhohhlj56X+EmMSJyS8nvQ3/uz7wlw+bX79DyENMc3gCcIOXaJ//CxgAAAAASUVORK5CYII=) no-repeat scroll 0% 0% transparent!important;}#server-header .has-pbbans .selected-server-setting-pbbans, #server-header .has-pbbans .selected-server-setting-ggcstream, #server-header .has-pbbans .selected-server-setting-anticheatinc{margin-left:0px:margin-right:0px;display:block;background-repeat:no-repeat;padding-left:25px;width:40px;}#server-header .has-pbbans{float:left;margin-left:20px;margin-top:5px;}#server-header .has-pbbans li{float:left;}"},
bf4:function(a){a.loadCSS.add(a.loadCSS.css.any);a.loadCSS.add(a.loadCSS.css.bf4)},bfh:function(a){a.loadCSS.add(a.loadCSS.css.any);a.loadCSS.add(a.loadCSS.css.bfh)},bf3:function(a){a.loadCSS.add(a.loadCSS.css.any);a.loadCSS.add(a.loadCSS.css.bf3)},add:function(a){var b=$("<style></style>");b.html(a);$("head").append(b)}},hasPBBans:{ajax:null,bf4:{serverlist:{init:function(a){0===$("#serverbrowser-show").length||$("#serverbrowser-results").data(a.id)||($("#serverbrowser-results").data(a.id,!0),$("#serverbrowser-show")[0].addEventListener("DOMNodeInserted",
function(b){b&&b.target&&"box"===b.target.className&&(0<$("#serverbrowser-show .server-info .hasPBBans").length||0===$("#serverbrowser-show .action-buttons-container .join").length||a.hasPBBans.bf4.serverlist.updateServerInfo(a))},!0),0<$("#serverbrowser-show .action-buttons-container .join").length&&a.hasPBBans.bf4.serverlist.updateServerInfo(a))},updateServerInfo:function(a){$("#serverbrowser-show .server-info .settings").addClass("hasPBBans");null!==a.hasPBBans.ajax&&a.hasPBBans.ajax.abort();var b=
$("#serverbrowser-show .action-buttons-container .join").data("ip").trim(),e=$("#serverbrowser-show .action-buttons-container .join").data("port"),c=$("#serverbrowser-show .server-info .settings .icon-fairfight").parent().parent(),c=$('<li class="highlight">PBBans<b><span class="icon icon-pbbans"></span> <span class="status">...</span></b></li>').insertAfter(c),d=$('<li class="highlight">GGC-Stream<b><span class="icon icon-ggcstream"></span> <span class="status">...</span></b></li>').insertAfter(c),
f=$('<li class="highlight">Anticheat Inc<b><span class="icon icon-anticheatinc"></span> <span class="status">...</span></b></li>').insertAfter(d);a.hasPBBans.ajax=a.hasPBBans.request(a,b,e,"http://alites.tk/battlelog-plugins/has-pbbans/chupachups.php?ip="+b+"&port="+e+"&bf=4&json",c,d,f,".status")}},serverinfo:{init:function(a){if(0!==$("#server-page").length&&!$("#server-page").data(a.id)){$("#server-page").data(a.id,!0);null!==a.hasPBBans.ajax&&a.hasPBBans.ajax.abort();var b=$("#server-page-join-buttons").data("ip").trim(),
e=$("#server-page-join-buttons").data("port"),c=$("#server-page-settings .box .icon-fairfight").parent().parent(),c=$('<dl><dt>PBBANS</dt><dd><span class="icon icon-pbbans"></span> <span class="status">...</span></dd></dl>').insertAfter(c),d=$('<dl><dt>GGC-STREAM</dt><dd><span class="icon icon-ggcstream"></span> <span class="status">...</span></dd></dl>').insertAfter(c),f=$('<dl><dt>ANTICHEAT INC</dt><dd><span class="icon icon-anticheatinc"></span> <span class="status">...</span></dd></dl>').insertAfter(d);
a.hasPBBans.ajax=a.hasPBBans.request(a,b,e,"http://alites.tk/battlelog-plugins/has-pbbans/chupachups.php?ip="+b+"&port="+e+"&bf=4&json",c,d,f,".status")}}}},bfh:{serverlist:{init:function(a){0===$("#serverbrowser-show").length||$("#serverbrowser-results").data(a.id)||($("#serverbrowser-results").data(a.id,!0),$("#serverbrowser-show")[0].addEventListener("DOMNodeInserted",function(b){b&&b.target&&"box"===b.target.className&&(0<$("#serverbrowser-show .server-info .hasPBBans").length||0===$("#serverbrowser-show .action-buttons-container .join").length||
a.hasPBBans.bfh.serverlist.updateServerInfo(a))},!0),0<$("#serverbrowser-show .action-buttons-container .join").length&&a.hasPBBans.bfh.serverlist.updateServerInfo(a))},updateServerInfo:function(a){$("#serverbrowser-show .server-info .settings").addClass("hasPBBans");null!==a.hasPBBans.ajax&&a.hasPBBans.ajax.abort();var b=$("#serverbrowser-show .action-buttons-container .join").data("ip").trim(),e=$("#serverbrowser-show .action-buttons-container .join").data("port"),c=$("#serverbrowser-show .server-info .settings .icon-fairfight").parent().parent(),
c=$('<li>PBBans<b><span class="icon icon-pbbans"></span> <span class="status">...</span></b></li>').insertAfter(c),d=$('<li>GGC-Stream<b><span class="icon icon-ggcstream"></span> <span class="status">...</span></b></li>').insertAfter(c),f=$('<li>Anticheat Inc<b><span class="icon icon-anticheatinc"></span> <span class="status">...</span></b></li>').insertAfter(d);a.hasPBBans.ajax=a.hasPBBans.request(a,b,e,"http://alites.tk/battlelog-plugins/has-pbbans/chupachups.php?ip="+b+"&port="+e+"&bf=h&json",
c,d,f,".status")}},serverinfo:{init:function(a){if(0!==$("#server-page").length&&!$("#server-page").data(a.id)){$("#server-page").data(a.id,!0);null!==a.hasPBBans.ajax&&a.hasPBBans.ajax.abort();var b=$("#server-page-join-buttons").data("ip").trim(),e=$("#server-page-join-buttons").data("port"),c=$("#server-page-settings .box .icon-fairfight").parent().parent(),c=$('<dl><dt>PBBANS</dt><dd><span class="icon icon-pbbans"></span> <span class="status">...</span></dd></dl>').insertAfter(c),d=$('<dl><dt>GGC-STREAM</dt><dd><span class="icon icon-ggcstream"></span> <span class="status">...</span></dd></dl>').insertAfter(c),
f=$('<dl><dt>ANTICHEAT INC</dt><dd><span class="icon icon-anticheatinc"></span> <span class="status">...</span></dd></dl>').insertAfter(d);a.hasPBBans.ajax=a.hasPBBans.request(a,b,e,"http://alites.tk/battlelog-plugins/has-pbbans/chupachups.php?ip="+b+"&port="+e+"&bf=h&json",c,d,f,".status")}}}},bf3:{serverlist:{init:function(a){0===$(".serverguide-list").length||0===$("#serverguide-show").length||$("#serverguide-server-list").data(a.id)||($("#serverguide-server-list").data(a.id,!0),$("#serverguide-show")[0].addEventListener("DOMNodeInserted",
function(b){b&&b.target&&"base-box-push"===b.target.className&&(0<$("#selected-server-settings .hasPBBans").length||a.hasPBBans.bf3.serverlist.updateServerInfo(a))},!0),0<$("#serverguide-show-serverjoin .base-button-arrow-almost-gigantic").length&&a.hasPBBans.bf3.serverlist.updateServerInfo(a))},updateServerInfo:function(a){$("#server-settings").addClass("hasPBBans");null!==a.hasPBBans.ajax&&a.hasPBBans.ajax.abort();var b=$("#serverguide-show-serverjoin .base-button-arrow-almost-gigantic").data("ip").trim(),
e=$("#serverguide-show-serverjoin .base-button-arrow-almost-gigantic").data("port"),c=$("#server-settings .selected-server-setting-pb").parent(),c=$('<li>PBBans<span class="selected-server-setting selected-server-setting-pbbans">...</span></li>').insertAfter(c),d=$('<li>GGC-Stream<span class="selected-server-setting selected-server-setting-ggcstream">...</span></li>').insertAfter(c),f=$('<li>Anticheat Inc<span class="selected-server-setting selected-server-setting-anticheatinc">...</span></li>').insertAfter(d);
a.hasPBBans.ajax=a.hasPBBans.request(a,b,e,"http://alites.tk/battlelog-plugins/has-pbbans/chupachups.php?ip="+b+"&port="+e+"&bf=3&json",c,d,f,".selected-server-setting")}},serverinfo:{init:function(a){if(0!==$("#server-page").length&&!$("#server-page").data(a.id)){$("#server-page").data(a.id,!0);null!==a.hasPBBans.ajax&&a.hasPBBans.ajax.abort();var b=$("#server-header .base-button-arrow-almost-gigantic").data("ip").trim(),e=$("#server-header .base-button-arrow-almost-gigantic").data("port"),c=$('<li><span title="PBBans" class="status selected-server-setting-pbbans">...</span></li>'),
d=$('<li><span title="GGC-Stream" class="status selected-server-setting-ggcstream">...</span></li>'),f=$('<li><span title="Anticheat Inc" class="status selected-server-setting-anticheatinc">...</span></li>');$("#server-header").append($('<ul class="has-pbbans"></ul>').append(c).append(d).append(f));a.hasPBBans.ajax=a.hasPBBans.request(a,b,e,"http://alites.tk/battlelog-plugins/has-pbbans/chupachups.php?ip="+b+"&port="+e+"&bf=3&json",c,d,f,".status")}}}},request:function(a,b,e,c,d,f,k,h){return $.getJSON(c,
function(g){a.hasPBBans.ajax=null;g.update?(d.find(h).html("Updating"),f.find(h).html("Updating"),k.find(h).html("Updating"),a.hasPBBans.ajax="timer",setTimeout(function(){"timer"===a.hasPBBans.ajax&&(a.hasPBBans.ajax=a.hasPBBans.request(a,b,e,c,d,f,k,h))},2E3)):(d.find(h).html(g.pbbans&&"Unknown"!==g.pbbans?'<a style="color:green;" href="http://www.pbbans.com/msi-server-'+b.replace(/\./g,"-")+"-"+e+'.html" target="_blank">On</a>':"Unknown"!==g.pbbans?'<span style="color:red;">Off</span>':'<a href="http://www.pbbans.com/msi-server-'+
b.replace(/\./g,"-")+"-"+e+'.html" target="_blank">n/a</a>'),g.pbbans&&"Unknown"!==g.pbbans&&d.attr("data-tooltip","Server protected by PBBans<br>Cross Game : "+(g.pbbans[0]?"On":"Off")+"<br>\u039c\u0392i Bans : "+(g.pbbans[1]?"On":"Off")+"<br>UMBi Bans : "+(g.pbbans[0]?"On":"Off")),"Unknown"===g.pbbans&&d.attr("data-tooltip",'Unknown if server is protected by PBBans.<br>Click the "n/a" to see server\'s status.'),f.find(h).html(g.ggc?"Unknown"!=g.ggc?'<a style="color:green;" href="https://www.ggc-stream.net/search/server/wwo" target="_blank">On</a>':
"n/a":'<span style="color:red;">Off</span>'),"Unknown"===g.ggc?f.attr("data-tooltip","Unknown if server is protected by GGC-Stream."):g.ggc&&f.attr("data-tooltip","Server protected by GGC-Stream"),k.find(h).html(g.aci?"Unknown"!=g.aci?'<a style="color:green;" href="http://www.anticheatinc.net/forums/streaming.php?address='+b+"%3A"+e+'" target="_blank">On</a>':'<a href="http://www.anticheatinc.net/forums/streaming.php?address='+b+"%3A"+e+'" target="_blank">n/a</a>':'<span style="color:red;">Off</span>'),
"Unknown"===g.aci?k.attr("data-tooltip",'Unknown if server is protected by Anticheat Inc.<br>Click the "n/a" to see server\'s status.'):g.aci&&k.attr("data-tooltip","Server protected by Anticheat Inc<br>LiveSecure : "+(g.aci[0]?"On":"Off")))}).fail(function(){a.hasPBBans.ajax=null;d.find(h).html("Error");f.find(h).html("Error");k.find(h).html("Error")})}}});
